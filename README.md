# çµæ¨¡ç½‘å…³ (LLMGateway)

ğŸ¯ ä¸€ä¸ªå…è´¹ LLM æ¨¡å‹èšåˆç½‘å…³ï¼Œæ”¯æŒå¤šæ¨¡å‹è‡ªåŠ¨åˆ‡æ¢ã€é¢åº¦ç›‘æ§ã€è¯·æ±‚æ—¥å¿—ç­‰åŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ”„ **å¤šæ¨¡å‹æ”¯æŒ** - OpenAIã€Claudeã€Qwenã€æ™ºè°±æ¸…è¨€ã€é€šä¹‰åƒé—®ç­‰
- ğŸ“Š **é¢åº¦ç›‘æ§** - å®æ—¶ç›‘æ§å„æ¨¡å‹ä½¿ç”¨é¢åº¦
- ğŸš€ **è‡ªåŠ¨åˆ‡æ¢** - é¢åº¦è€—å°½è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå¯ç”¨æ¨¡å‹
- ğŸ“ **è¯·æ±‚æ—¥å¿—** - å®Œæ•´è®°å½•æ‰€æœ‰ API è¯·æ±‚
- ğŸ”” **é€šçŸ¥é¢„è­¦** - é¢åº¦å³å°†è€—å°½æ—¶åŠæ—¶æé†’
- ğŸ‘¤ **ç”¨æˆ·ç®¡ç†** - ä¸ªäººä¸­å¿ƒã€å¯†ç ä¿®æ”¹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# Docker å’Œ Docker Compose
docker --version
docker compose version
```

### 2. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/Chyrain/LLMGateway.git
cd LLMGateway
```

### 3. å¯åŠ¨æœåŠ¡

```bash
docker compose up -d
```

### 4. è®¿é—®ç®¡ç†åå°

- **åœ°å€**: http://localhost:80
- **é»˜è®¤è´¦å·**: `admin`
- **é»˜è®¤å¯†ç **: `admin123`

> âš ï¸ **é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼**

## ğŸ“– ä½¿ç”¨æŒ‡å—

### æ·»åŠ æ¨¡å‹é…ç½®

1. ç™»å½•ç®¡ç†åå°
2. è¿›å…¥ **æ¨¡å‹é…ç½®** é¡µé¢
3. ç‚¹å‡» **æ·»åŠ æ¨¡å‹**
4. å¡«å†™æ¨¡å‹ä¿¡æ¯ï¼š
   - **å‚å•†**: é€‰æ‹©æ¨¡å‹æä¾›å•†ï¼ˆOpenAIã€Claudeã€Qwen ç­‰ï¼‰
   - **æ¨¡å‹åç§°**: å¦‚ `gpt-4o`ã€`claude-3-5-sonnet`
   - **API Key**: åœ¨å„å¹³å°ç”³è¯·çš„ API Key
   - **API Base**: API æ¥å£åœ°å€ï¼ˆå¤§éƒ¨åˆ†å‚å•†å·²é¢„è®¾ï¼‰
   - **ä¼˜å…ˆçº§**: æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆ1 æœ€é«˜ï¼‰
5. ç‚¹å‡» **æµ‹è¯•è¿é€š** éªŒè¯é…ç½®
6. ç‚¹å‡» **å¯ç”¨** æ¿€æ´»æ¨¡å‹

### é…ç½®å‚æ•°è¯´æ˜

| å‚æ•° | å¿…å¡« | è¯´æ˜ |
|-----|------|------|
| å‚å•† | âœ… | æ¨¡å‹æä¾›å•† |
| æ¨¡å‹åç§° | âœ… | å…·ä½“æ¨¡å‹æ ‡è¯† |
| API Key | âœ… | å¹³å°ç”³è¯·çš„å¯†é’¥ |
| API Base | âŒ | å¤§éƒ¨åˆ†å‚å•†å·²é¢„è®¾é»˜è®¤å€¼ |
| ä¼˜å…ˆçº§ | âŒ | é»˜è®¤ 100ï¼Œæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ |

### ä½¿ç”¨ç½‘å…³ API

```bash
# ç¤ºä¾‹ï¼šè°ƒç”¨ Chat Completions API
curl -X POST "http://localhost:8000/v1/chat/completions" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "model": "gpt-4o",
    "messages": [{"role": "user", "content": "ä½ å¥½"}]
  }'
```

## ğŸ—ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
LLMGateway/
â”œâ”€â”€ backend/               # åç«¯æœåŠ¡ (FastAPI)
â”‚   â”œâ”€â”€ main.py           # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/           # é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routers/         # API è·¯ç”±
â”‚   â””â”€â”€ services/        # ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ frontend/             # å‰ç«¯åº”ç”¨ (Vue3 + Element Plus)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/         # API æ¥å£
â”‚   â”‚   â”œâ”€â”€ views/       # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/      # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ styles/      # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ gateway/              # ç½‘å…³æœåŠ¡
â”œâ”€â”€ docs/                 # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ docker-compose.yml    # Docker ç¼–æ’
```

### æœ¬åœ°å¼€å‘

**åç«¯**:

```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn main:app --reload
```

**å‰ç«¯**:

```bash
cd frontend
npm install
npm run dev
```

### API æ¥å£æ–‡æ¡£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|-----|------|------|
| `/api/auth/login` | POST | ç”¨æˆ·ç™»å½• |
| `/api/auth/logout` | POST | é€€å‡ºç™»å½• |
| `/api/auth/profile` | GET | è·å–ç”¨æˆ·ä¿¡æ¯ |
| `/api/auth/change-password` | POST | ä¿®æ”¹å¯†ç  |
| `/api/model/list` | GET | æ¨¡å‹åˆ—è¡¨ |
| `/api/model/add` | POST | æ·»åŠ æ¨¡å‹ |
| `/api/model/{id}/test` | POST | æµ‹è¯•è¿é€š |
| `/api/quota/stat` | GET | é¢åº¦ç»Ÿè®¡ |
| `/api/notifications` | GET | é€šçŸ¥åˆ—è¡¨ |
| `/v1/chat/completions` | POST | Chat API |

## ğŸ³ Docker éƒ¨ç½²

### ä½¿ç”¨ Docker Compose

```bash
# æ„å»ºå¹¶å¯åŠ¨
docker compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f

# åœæ­¢æœåŠ¡
docker compose down

# é‡æ–°æ„å»º
docker compose build --no-cache
```

### ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ `.env` æ–‡ä»¶é…ç½®ï¼š

```env
# åç«¯
BACKEND_PORT=8000
DB_TYPE=sqlite
DB_PATH=./data/llmgateway.db

# å‰ç«¯
VITE_API_BASE=/api

# ç½‘å…³
GATEWAY_PORT=8080
```

### ç«¯å£è¯´æ˜

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| frontend | 80 | ç®¡ç†åå° |
| backend | 8000 | åç«¯ API |
| gateway | 8080 | ç½‘å…³æœåŠ¡ |

## ğŸ”” é€šçŸ¥ç³»ç»Ÿ

ç³»ç»Ÿä¼šåœ¨ä»¥ä¸‹æƒ…å†µå‘é€é€šçŸ¥ï¼š

- âœ… æ¨¡å‹å¯ç”¨æˆåŠŸ
- âš ï¸ æ¨¡å‹é¢åº¦ä½äº 20%
- âŒ æ¨¡å‹é¢åº¦è€—å°½
- ğŸ”„ è‡ªåŠ¨åˆ‡æ¢æ¨¡å‹

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-02-04)

- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ” ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- ğŸ¤– å¤šæ¨¡å‹é…ç½®ç®¡ç†
- ğŸ“Š é¢åº¦ç›‘æ§
- ğŸ“ è¯·æ±‚æ—¥å¿—
- ğŸ”” é€šçŸ¥ç³»ç»Ÿ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
